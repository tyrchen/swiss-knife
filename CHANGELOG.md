# Changelog

All notable changes to this project will be documented in this file. See [conventional commits](https://www.conventionalcommits.org/) for commit guidelines.

---
## [0.2.1] - 2025-12-07

### Features

- add imgen - ([e055cad](https://github.com/commit/e055cada70d91b4619eae8fb41944ea3a61e0a5e)) - Tyr Chen
- support s3upload - ([413b3e9](https://github.com/commit/413b3e9d1b7d8172b9ff4aebb39588e105accca9)) - Tyr Chen
- limit ext to be uploaded - ([00fc4ec](https://github.com/commit/00fc4ec906491b13ddafd4cc640de05e923adfb7)) - Tyr Chen
- feature: make s3upload concurrently upload
  Summary of Changes

  1. Added MPSC Channel-based Concurrency

  - Replaced sequential processing with worker pool pattern using tokio::sync::mpsc
  - Workers pull tasks from a shared channel (Arc<Mutex<Receiver>>)
  - Default 4 concurrent workers (configurable with -c flag)

  2. Clean Output with Result Channel

  - Added ProcessResult enum to represent different outcomes
  - Workers send results to a separate results channel
  - Main thread collects all results, sorts by filename, then prints cleanly
  - No more interleaved output during concurrent uploads

  3. Key Features

  - Work Channel: Distributes file paths to workers
  - Result Channel: Collects results for ordered display
  - Sorted Output: Results are sorted alphabetically by filename before printing
  - Clean Display: All progress bars complete before any output is shown
  - Stats Tracking: Thread-safe atomic counters for statistics

  4. Architecture

  Producer (Main Thread)
      ↓
  Work Channel (bounded, size 100)
      ↓
  Workers (N concurrent) → Process Files → Result Channel
      ↓
  Collector Task → Sorts Results
      ↓
  Main Thread → Pretty Print (sorted, clean output) - ([143b29a](https://github.com/commit/143b29a2ba53b01248e67ff5a63003328169b10b)) - Tyr Chen
- feature: implement phase 1 & 2 plan
  Phase 1 - Critical Fixes:
  1. ✅ Configuration Validation (1.7) - Validates bucket names, regions, paths
  2. ✅ ETag-based File Comparison (1.3) - MD5 hash verification prevents false positives
  3. ✅ Memory Management (1.5) - Streaming uploads + multipart for large files
  4. ✅ Progress Tracking (1.1) - Visual feedback with steady ticks
  5. ✅ Retry Logic (1.6) - 3 retries with exponential backoff
  6. ✅ Error Handling (1.2) - Structured errors with helpful messages
  7. ✅ Logging Infrastructure (1.8) - Tracing throughout (use RUST_LOG=debug)

  Phase 2 - Core Features:
  1. ✅ Multipart Upload (2.1) - Automatic for files > 100MB
  2. ✅ Unit Tests (4.1) - 8 tests, all passing
  3. ✅ Documentation (5.1) - Comprehensive rustdoc comments - ([36448af](https://github.com/commit/36448af489b1f5018492a18980999dfc0022fb61)) - Tyr Chen
- feature: implemented phase 3 & 4
  New Features:
  1. ✅ Dry-Run Mode - Preview uploads without actually uploading
  2. ✅ Custom URL Expiration - Control pre-signed URL lifetime (1-168 hours)
  3. ✅ Content-Type Detection - Automatic MIME type detection for 50+ file types
  4. ✅ Metadata & Tags Support - Parse and prepare custom S3 metadata/tags
  5. ✅ Flatten Directory Option - Upload files without directory structure
  6. ✅ Custom Prefix - Override S3 target path per upload
  7. ✅ Enhanced Output - Better statistics with upload speed and byte counts - ([95b80d5](https://github.com/commit/95b80d527d2660098ce2936984b64df064af0450)) - Tyr Chen
- allow configuring log level - ([8721ac8](https://github.com/commit/8721ac8dd43e8b09116cf070d1a91d707e714003)) - Tyr Chen
- support pdf2jpg - ([4bec446](https://github.com/commit/4bec44613978e9219ca0f777dfe6c1c524f85ea6)) - Tyr Chen

### Miscellaneous Chores

- update gh action - ([3458333](https://github.com/commit/345833383d30cee838b80a57d6ef846311b48abe)) - Tyr Chen
- update deps - ([a43fb39](https://github.com/commit/a43fb39c7044fa6dd11bd5e7bfd1067ca9bb157f)) - Tyr Chen
- update docs for cli - ([4314388](https://github.com/commit/4314388baa430285f800087c66cae9a936df336a)) - Tyr Chen
- improve multipart upload - ([2a09cc7](https://github.com/commit/2a09cc789824c38f2be6fdfdb1b16fbd1ff79202)) - Tyr Chen
- bump version - ([5ccc7b4](https://github.com/commit/5ccc7b47e4c08447743d5a92021c7ea6e6cda7a6)) - Tyr Chen

<!-- generated by git-cliff -->
